name: Thousand Moons Smithy
typeline: Legendary Artifact
cost:
  mana_cost: '{2}{W}{W}'
etb_abilities:
  - oracle_text: When Thousand Moons Smithy enters the battlefield, create a white
      Gnome Soldier artifact creature token with "This creature's power and toughness
      are each equal to the number of artifacts and/or creatures you control."
    effect: !CreateToken
      token: !Creature
        name: Gnome Soldier
        typeline: Artifact Creature - Gnome Soldier
        colors:
          - color: !White {}
        dynamic_power_toughness:
          source: !NumberOfPermanentsMatching
            restrictions:
              - restriction: !Controller
                  controller: !Self_ {}
              - restriction: !OfType
                  types:
                    - type_: !Artifact {}
                    - type_: !Creature {}
triggered_abilities:
  - trigger:
      source:
        trigger: !PreCombatMainPhase {}
      from:
        location: !Anywhere {}
      restrictions:
        - restriction: !Controller
            controller: !Self_ {}
    effects:
      - effect: !PayCostThen
          cost:
            additional_costs:
              - cost: !TapPermanent
                  restrictions:
                    - restriction: !OfType
                        types:
                          - type_: !Creature {}
                          - type_: !Artifact {}
              - cost: !TapPermanent
                  restrictions:
                    - restriction: !OfType
                        types:
                          - type_: !Creature {}
                          - type_: !Artifact {}
              - cost: !TapPermanent
                  restrictions:
                    - restriction: !OfType
                        types:
                          - type_: !Creature {}
                          - type_: !Artifact {}
              - cost: !TapPermanent
                  restrictions:
                    - restriction: !OfType
                        types:
                          - type_: !Creature {}
                          - type_: !Artifact {}
              - cost: !TapPermanent
                  restrictions:
                    - restriction: !OfType
                        types:
                          - type_: !Creature {}
                          - type_: !Artifact {}
          effects:
            - effect: !Transform {}
    oracle_text: Transform Thousand Moons Smithy
back_face:
  name: Barracks of the Thousand
  typeline: Legendary Artifact Land
  triggered_abilities:
    - trigger:
        source:
          trigger: !Cast {}
        from:
          location: !Anywhere {}
        restrictions:
          - restriction: !Controller
              controller: !Self_ {}
          - restriction: !OfType
              types:
                - type_: !Artifact {}
                - type_: !Creature {}
      effects:
        - effect: !CreateToken
            token: !Creature
              name: Gnome Soldier
              typeline: Artifact Creature - Gnome Soldier
              colors:
                - color: !White {}
              dynamic_power_toughness:
                source: !NumberOfPermanentsMatching
                  restrictions:
                    - restriction: !Controller
                        controller: !Self_ {}
                    - restriction: !OfType
                        types:
                          - type_: !Artifact {}
                          - type_: !Creature {}
      oracle_text: Whenever you cast an artifact or creature spell using mana from
        Barracks of the Thousand, create a white Gnome Soldier artifact creature token
        with "This creature's power and toughness are each equal to the number of
        artifacts and/or creatures you control."
  mana_abilities:
    - cost:
        tap: true
      gain_mana:
        gain: !Specific
          gains:
            - mana: !White {}
      mana_source:
        source: !BarracksOfTheThousand {}
