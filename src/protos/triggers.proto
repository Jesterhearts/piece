syntax = "proto3";

package triggers;

import "controller.proto";
import "targets.proto";
import "types.proto";

message Location {
  message Anywhere {}
  message Battlefield {}
  message Library {}

  oneof location {
    Anywhere anywhere = 1;
    Battlefield battlefield = 2;
    Library library = 3;
  }
}

message TriggerSource {
  message EntersTheBattlefield {}
  message ExiledDuringCraft {}
  message PutIntoGraveyard {}
  message StartOfCombat {}
  message Tapped {}

  oneof trigger {
    EntersTheBattlefield enters_the_battlefield = 1;
    ExiledDuringCraft exiled_during_craft = 2;
    PutIntoGraveyard put_into_graveyard = 3;
    StartOfCombat start_of_combat = 4;
    Tapped tapped = 5;
  }
}

message Trigger {
  TriggerSource source = 1;
  Location from = 2;
  controller.Controller controller = 3;
  repeated targets.Restriction restrictions = 4;
}