syntax = "proto3";

package cost;

import "mana.proto";
import "targets.proto";

message ManaSource {
  message Cave {}
  message Treasure {}
  oneof source {
    Cave cave = 1;
    Treasure treasure = 2;
  }
}

message ManaCost {
  oneof cost {
    mana.White white = 1;
    mana.Blue blue = 2;
    mana.Black black = 3;
    mana.Red red = 4;
    mana.Green green = 5;
    mana.Colorless colorless = 6;
    mana.Generic generic = 7;
    mana.X x = 8;
    mana.TwoX twox = 9;
  }
}

message AdditionalCost {
  message ExileCardsCmcX {
    targets.Restriction restrictions = 1;
  }
  message PayLife {
    int32 count = 1;
  }
  message SacrificePermanent {
    targets.Restriction restrictions = 1;
  }
  message SacrificeSource {}
  message TapPermanent {
    targets.Restriction restrictions = 1;
  }

  oneof cost {
    ExileCardsCmcX exile_cards_cmc_x = 2;
    PayLife pay_life = 3;
    SacrificePermanent sacrifice_permanent = 4;
    SacrificeSource sacrifice_source = 5;
    TapPermanent tap_permanent = 6;
  }
}

message Ward {
  repeated ManaCost mana_costs = 1;
}

message CastingCost {
  repeated ManaCost mana_costs = 1;
  repeated AdditionalCost additional_costs = 2;
}

message AbilityCost {
  repeated ManaCost mana_costs = 1;
  optional bool tap = 2;
  repeated AdditionalCost additional_costs = 3;
}

message XIs {
  message Cmc {}
  oneof x_is {
    Cmc cmc = 1;
  }
}